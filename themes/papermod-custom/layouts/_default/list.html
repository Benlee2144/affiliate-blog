{{ define "main" }}
<div class="container">
    {{ if .IsHome }}
    <div class="home-header">
        <h1>{{ .Site.Params.homeInfoParams.Title }}</h1>
        <p>{{ .Site.Params.homeInfoParams.Content }}</p>
    </div>
    {{ else }}
    <header class="page-header">
        <h1>{{ .Title }}</h1>
        {{ with .Description }}<p>{{ . }}</p>{{ end }}
    </header>
    {{ end }}

    <!-- AdSense Placeholder - Top of listing -->
    <!-- <div class="ad-container">
        <p>Advertisement</p>
    </div> -->

    <ul class="post-list">
        {{ $paginator := .Paginate (where .Site.RegularPages "Section" "posts") }}
        {{ range $paginator.Pages }}
        <li class="post-entry">
            <h2><a href="{{ .Permalink }}">{{ .Title }}</a></h2>
            <div class="post-meta">
                <span>{{ .Date.Format "January 2, 2006" }}</span>
                {{ if .ReadingTime }}<span>{{ .ReadingTime }} min read</span>{{ end }}
                {{ with .Params.categories }}
                <span>{{ delimit . ", " }}</span>
                {{ end }}
            </div>
            <p class="post-summary">{{ .Summary | truncate 200 }}</p>
        </li>
        {{ end }}
    </ul>

    {{ if gt $paginator.TotalPages 1 }}
    <nav class="pagination">
        {{ if $paginator.HasPrev }}
        <a href="{{ $paginator.Prev.URL }}">← Previous</a>
        {{ end }}

        {{ range $paginator.Pagers }}
        {{ if eq . $paginator }}
        <span class="active">{{ .PageNumber }}</span>
        {{ else }}
        <a href="{{ .URL }}">{{ .PageNumber }}</a>
        {{ end }}
        {{ end }}

        {{ if $paginator.HasNext }}
        <a href="{{ $paginator.Next.URL }}">Next →</a>
        {{ end }}
    </nav>
    {{ end }}
</div>
{{ end }}
