{{ define "main" }}
{{ if .IsHome }}
<!-- HOMEPAGE -->
<div class="home-hero">
    <div class="container">
        <div class="hero-content">
            <span class="hero-badge">Research-Backed Reviews</span>
            <h1>{{ .Site.Params.homeInfoParams.Title }}</h1>
            <p class="hero-description">{{ .Site.Params.homeInfoParams.Content }}</p>
            <div class="hero-stats">
                <div class="stat">
                    <span class="stat-number">{{ len (where .Site.RegularPages "Section" "posts") }}+</span>
                    <span class="stat-label">Reviews</span>
                </div>
                <div class="stat">
                    <span class="stat-number">1000s</span>
                    <span class="stat-label">Hours Researched</span>
                </div>
                <div class="stat">
                    <span class="stat-number">100%</span>
                    <span class="stat-label">Independent</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Category Quick Links -->
<div class="container">
    <section class="category-quick-links">
        <h2 class="section-title">Browse by Category</h2>
        <div class="quick-links-grid">
            {{ range .Site.Taxonomies.categories }}
            {{ $name := .Page.Title }}
            {{ $count := len .Pages }}
            {{ $icon := "‚óÜ" }}
            {{ if eq (lower $name) "tablets" }}{{ $icon = "üì±" }}{{ end }}
            {{ if eq (lower $name) "kitchen appliances" }}{{ $icon = "‚ö°" }}{{ end }}
            {{ if eq (lower $name) "electronics" }}{{ $icon = "üéß" }}{{ end }}
            {{ if eq (lower $name) "home & garden" }}{{ $icon = "üè†" }}{{ end }}
            {{ if eq (lower $name) "fitness" }}{{ $icon = "üí™" }}{{ end }}
            {{ if eq (lower $name) "beauty" }}{{ $icon = "‚ú®" }}{{ end }}
            {{ if eq (lower $name) "office" }}{{ $icon = "üíº" }}{{ end }}
            {{ if eq (lower $name) "outdoor" }}{{ $icon = "‚õ∞Ô∏è" }}{{ end }}
            <a href="{{ .Page.Permalink }}" class="quick-link">
                <span class="quick-link-icon">{{ $icon }}</span>
                <span class="quick-link-name">{{ $name }}</span>
                <span class="quick-link-count">{{ $count }}</span>
            </a>
            {{ end }}
        </div>
    </section>

    <!-- Latest Reviews -->
    <section class="latest-reviews">
        <div class="section-header">
            <h2 class="section-title">Latest Reviews</h2>
            <p class="section-subtitle">In-depth analysis backed by real owner feedback</p>
        </div>

        <div class="reviews-grid">
            {{ $posts := where .Site.RegularPages "Section" "posts" }}
            {{ range first 6 $posts }}
            <article class="review-card">
                {{ $postLink := .Permalink }}
                {{ $postTitle := .Title }}
                <a href="{{ $postLink }}" class="review-card-image">
                    {{ with .Params.cover.image }}
                    <img src="{{ . }}" alt="{{ $postTitle }}" loading="lazy" width="800" height="600">
                    {{ else }}
                    <div style="width:100%;height:100%;background:var(--color-bg-alt);border-radius:8px;"></div>
                    {{ end }}
                </a>
                <div class="review-card-content">
                    {{ with .Params.categories }}
                    <a href="/categories/{{ index . 0 | urlize }}/" class="review-card-category">{{ index . 0 }}</a>
                    {{ end }}
                    <h3><a href="{{ $postLink }}">{{ $postTitle }}</a></h3>
                    <p class="review-card-summary">{{ .Summary | truncate 120 }}</p>
                    <div class="review-card-meta">
                        {{ with .Params.rating }}
                        <span class="review-card-rating">‚òÖ {{ . }}</span>
                        {{ end }}
                        <span class="review-card-date">{{ .Date.Format "Jan 2, 2006" }}</span>
                    </div>
                </div>
            </article>
            {{ end }}
        </div>

        {{ if gt (len $posts) 6 }}
        <div class="view-all-wrapper">
            <a href="/categories/" class="view-all-btn">View All Reviews ‚Üí</a>
        </div>
        {{ end }}
    </section>

    <!-- Newsletter Signup -->
    <section class="newsletter-section">
        <h2>Get the Best Deals First</h2>
        <p>Join 5,000+ smart shoppers. We'll send you our top picks and price drops‚Äîno spam, ever.</p>
        <form class="newsletter-form" action="https://formspree.io/f/mykdgbyq" method="POST">
            <input type="email" name="email" placeholder="Enter your email" required>
            <button type="submit">Subscribe</button>
        </form>
        <p class="newsletter-note">Unsubscribe anytime. We respect your inbox.</p>
    </section>

    <!-- Trust Signals -->
    <section class="trust-section">
        <div class="trust-grid">
            <div class="trust-item">
                <div class="trust-icon">üîç</div>
                <h3>Deep Research</h3>
                <p>We analyze hundreds of verified reviews, Reddit discussions, and forum posts for every product.</p>
            </div>
            <div class="trust-item">
                <div class="trust-icon">‚öñÔ∏è</div>
                <h3>Honest Takes</h3>
                <p>Every product has downsides. We tell you what they are so you can decide if they matter to you.</p>
            </div>
            <div class="trust-item">
                <div class="trust-icon">üéØ</div>
                <h3>Clear Guidance</h3>
                <p>No wishy-washy "it depends." We tell you exactly who should buy‚Äîand who should skip.</p>
            </div>
        </div>
    </section>
</div>

{{ else }}
<!-- CATEGORY/SECTION PAGES -->
<div class="container">
    <header class="page-header">
        <h1>{{ .Title }}</h1>
        {{ with .Description }}<p>{{ . }}</p>{{ end }}
    </header>

    <div class="reviews-grid">
        {{ $paginator := .Paginate .Pages }}
        {{ range $paginator.Pages }}
        {{ $cardTitle := .Title }}
        <article class="review-card">
            <a href="{{ .Permalink }}" class="review-card-image">
                {{ with .Params.cover.image }}
                <img src="{{ . }}" alt="{{ $cardTitle }}" loading="lazy" width="800" height="600">
                {{ else }}
                <div style="width:100%;height:100%;background:var(--color-bg-alt);border-radius:8px;"></div>
                {{ end }}
            </a>
            <div class="review-card-content">
                {{ with .Params.categories }}
                <a href="/categories/{{ index . 0 | urlize }}/" class="review-card-category">{{ index . 0 }}</a>
                {{ end }}
                <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
                <p class="review-card-summary">{{ .Summary | truncate 120 }}</p>
                <div class="review-card-meta">
                    {{ with .Params.rating }}
                    <span class="review-card-rating">‚òÖ {{ . }}</span>
                    {{ end }}
                    <span class="review-card-date">{{ .Date.Format "Jan 2, 2006" }}</span>
                </div>
            </div>
        </article>
        {{ end }}
    </div>

    {{ if gt $paginator.TotalPages 1 }}
    <nav class="pagination">
        {{ if $paginator.HasPrev }}
        <a href="{{ $paginator.Prev.URL }}">‚Üê Previous</a>
        {{ end }}

        {{ range $paginator.Pagers }}
        {{ if eq . $paginator }}
        <span class="active">{{ .PageNumber }}</span>
        {{ else }}
        <a href="{{ .URL }}">{{ .PageNumber }}</a>
        {{ end }}
        {{ end }}

        {{ if $paginator.HasNext }}
        <a href="{{ $paginator.Next.URL }}">Next ‚Üí</a>
        {{ end }}
    </nav>
    {{ end }}
</div>
{{ end }}
{{ end }}
