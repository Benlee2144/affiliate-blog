{{ define "head" }}
<!-- Category/Tag Schema -->
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    "name": "{{ .Title }}",
    "description": "{{ .Title }} product reviews and buying guides",
    "url": "{{ .Permalink }}",
    "mainEntity": {
        "@type": "ItemList",
        "numberOfItems": {{ len .Pages }},
        "itemListElement": [
            {{ range $i, $page := .Pages }}
            {{ if $i }},{{ end }}
            {
                "@type": "ListItem",
                "position": {{ add $i 1 }},
                "url": "{{ $page.Permalink }}",
                "name": "{{ $page.Title }}"
            }
            {{ end }}
        ]
    }
}
</script>
{{ end }}

{{ define "main" }}
<div class="container">
    <header class="category-header">
        <nav class="breadcrumbs">
            <a href="/">Home</a>
            <span>›</span>
            <span>{{ .Title }}</span>
        </nav>
        <h1>{{ .Title }}</h1>
        <p class="category-description">Honest reviews and buying guides for {{ .Title | lower }}. We research real owner feedback so you can make smarter buying decisions.</p>
    </header>

    <div class="reviews-grid">
        {{ range .Pages }}
        <article class="review-card">
            <a href="{{ .Permalink }}" class="review-card-image">
                {{ with .Params.cover.image }}
                <img src="{{ . }}" alt="{{ $.Title }}" loading="lazy">
                {{ else }}
                <div style="width:100%;height:100%;background:var(--color-bg-alt);border-radius:8px;"></div>
                {{ end }}
            </a>
            <div class="review-card-content">
                {{ with .Params.categories }}
                <a href="/categories/{{ index . 0 | urlize }}/" class="review-card-category">{{ index . 0 }}</a>
                {{ end }}
                <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
                <p class="review-card-summary">{{ .Summary | truncate 120 }}</p>
                <div class="review-card-meta">
                    {{ with .Params.rating }}
                    <span class="review-card-rating">★ {{ . }}</span>
                    {{ end }}
                    <span class="review-card-date">{{ .Date.Format "Jan 2, 2006" }}</span>
                </div>
            </div>
        </article>
        {{ end }}
    </div>

    {{ template "_internal/pagination.html" . }}
</div>
{{ end }}
