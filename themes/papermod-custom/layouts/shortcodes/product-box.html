{{/* Product Box Shortcode
    Usage: {{< product-box
        name="Product Name"
        image="/images/products/product.jpg"
        price="$XX.XX"
        link="https://amazon.com/..."
        rating="4.5"
    >}}
*/}}

<div class="product-box">
    {{ with .Get "image" }}
    <a href="{{ $.Get "link" }}" target="_blank" rel="nofollow sponsored noopener" class="product-image-link">
        <img src="{{ . | absURL }}" alt="{{ $.Get "name" }}" loading="lazy" onerror="this.parentElement.style.display='none'">
    </a>
    {{ end }}
    <h3>{{ .Get "name" }}</h3>
    {{ with .Get "rating" }}
    <div class="rating" aria-label="Rating: {{ . }} out of 5">
        <span class="stars">
        {{ $rating := float . }}
        {{ range seq 5 }}
            {{ if le . (int $rating) }}★{{ else if and (gt $rating (sub . 1)) (lt $rating .) }}★{{ else }}☆{{ end }}
        {{ end }}
        </span>
        <span class="rating-text">({{ . }}/5)</span>
    </div>
    {{ end }}
    {{ with .Get "price" }}
    <div class="price">{{ . }}</div>
    {{ end }}
    {{ with .Get "link" }}
    <a href="{{ . }}" class="btn btn-amazon" target="_blank" rel="nofollow sponsored noopener">
        Check Price on Amazon
    </a>
    {{ end }}
</div>
